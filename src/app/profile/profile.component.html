<ion-header>
  <ion-toolbar>
    <ion-title>{{ 'profile.title' | translate }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-fab vertical="top" horizontal="end" slot="fixed">
  <ion-fab-button color="white" class="fab-bordered">
    <ion-icon (click)="close()" name="close"></ion-icon>
  </ion-fab-button>
</ion-fab>

<ion-content class="ion-padding">
  <ion-card *ngIf="loadedData">
    <ion-card-header class="center-header">
      <img *ngIf="userAvatar" [src]="userAvatar" alt="User Avatar ALT" />
      <img
        *ngIf="!userAvatar"
        src="../../assets/default_avatar.png"
        width="200"
        height="200"
        alt="User Avatar DEFAULT ALT"
      />
      <ion-button shape="round" color="dark" (click)="captureImage()">
        <ion-icon slot="icon-only" name="refresh"></ion-icon>
      </ion-button>
    </ion-card-header>

    <ion-card-content>
      <ion-item>
        <ion-input
          disabled
          label="{{ 'profile.cnp' | translate }}"
          labelPlacement="floating"
          [(ngModel)]="user.cnp"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-input
          label="{{ 'profile.firstname' | translate }}"
          labelPlacement="floating"
          [(ngModel)]="user.firstname"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-input
          label="{{ 'profile.lastname' | translate }}"
          labelPlacement="floating"
          [(ngModel)]="user.lastname"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-select
          label="{{ 'profile.gender' | translate }}"
          labelPlacement="floating"
          [(ngModel)]="user.gender"
        >
          <ion-select-option *ngFor="let gender of genders" [value]="gender">
            {{ gender }}
          </ion-select-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-input
          label="{{ 'profile.id-series' | translate }}"
          labelPlacement="floating"
          [(ngModel)]="user.idSeries"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-input
          label="{{ 'profile.id-number' | translate }}"
          labelPlacement="floating"
          [(ngModel)]="user.idNumber"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-select
          label="{{ 'profile.nationality' | translate }}"
          labelPlacement="floating"
          [(ngModel)]="user.nationality"
        >
          <ion-select-option
            *ngFor="let nationality of nationalities"
            [value]="nationality"
          >
            {{ nationality }}
          </ion-select-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-input
          label="{{ 'profile.birth-address' | translate }}"
          labelPlacement="floating"
          [(ngModel)]="user.birthAddress"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-input
          label="{{ 'profile.residence-address' | translate }}"
          labelPlacement="floating"
          [(ngModel)]="user.residenceAddress"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-input
          label="{{ 'profile.valid-from' | translate }}"
          labelPlacement="floating"
          [(ngModel)]="user.validityStartDate"
        ></ion-input>
      </ion-item>

      <ion-item>
        <ion-input
          label="{{ 'profile.valid-until' | translate }}"
          labelPlacement="floating"
          [(ngModel)]="user.validityEndDate"
        ></ion-input>
      </ion-item>

      <ion-button expand="block" color="dark" (click)="saveProfile()"
        >{{ 'profile.save' | translate }}</ion-button
      >
    </ion-card-content>
  </ion-card>
  <ion-card *ngIf="!loadedData">
    <ion-card-content>
      <ion-spinner name="crescent"></ion-spinner>
    </ion-card-content>
  </ion-card>
</ion-content>
